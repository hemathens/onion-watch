<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teachable Machine Demo (No Model Required)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .demo-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            color: #856404;
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        #webcam-container {
            margin: 20px 0;
            display: inline-block;
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        
        #webcam-container canvas {
            display: block;
        }
        
        #label-container {
            margin: 20px 0;
            text-align: left;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        #label-container div {
            padding: 10px;
            margin: 5px 0;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        
        .prediction-high {
            background-color: #e8f5e8 !important;
            border-left-color: #4CAF50 !important;
            font-weight: bold;
        }
        
        .prediction-medium {
            background-color: #fff3cd !important;
            border-left-color: #ffc107 !important;
        }
        
        .prediction-low {
            background-color: #f8f9fa !important;
            border-left-color: #6c757d !important;
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status.loading {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .file-input-container {
            margin: 20px 0;
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 10px;
            background-color: #fafafa;
        }
        
        input[type="file"] {
            margin: 10px 0;
        }
        
        #image-preview {
            max-width: 300px;
            max-height: 300px;
            margin: 10px auto;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Teachable Machine Demo</h1>
        
        <div class="demo-notice">
            <strong>Demo Mode:</strong> This is a demonstration version that shows how the interface works. 
            It generates random predictions instead of using a real AI model.
        </div>
        
        <div id="status" class="status" style="display: none;"></div>
        
        <div class="controls">
            <button id="start-btn" onclick="initWebcam()">üì∑ Start Demo Webcam</button>
            <button id="stop-btn" onclick="stopWebcam()" disabled>‚èπÔ∏è Stop Webcam</button>
        </div>
        
        <div class="file-input-container">
            <p>üìÅ Upload an image to classify (Demo)</p>
            <input type="file" id="image-input" accept="image/*" onchange="handleImageUpload(event)">
        </div>
        
        <img id="image-preview" style="display: none;">
        
        <div id="webcam-container"></div>
        
        <div id="label-container"></div>
    </div>

    <script>
        // Demo application - simulates Teachable Machine without requiring actual model files
        
        let webcam, labelContainer;
        let isWebcamRunning = false;
        
        // Demo classes (you can modify these)
        const demoClasses = [
            'Cat',
            'Dog', 
            'Bird',
            'Car',
            'Person'
        ];
        
        const maxPredictions = demoClasses.length;
        
        // DOM elements
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const statusDiv = document.getElementById('status');
        const imageInput = document.getElementById('image-input');
        const imagePreview = document.getElementById('image-preview');
        
        // Show status message
        function showStatus(message, type = 'loading') {
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
        }
        
        // Hide status message
        function hideStatus() {
            statusDiv.style.display = 'none';
        }
        
        // Initialize demo
        function initDemo() {
            labelContainer = document.getElementById("label-container");
            labelContainer.innerHTML = '';
            
            for (let i = 0; i < maxPredictions; i++) {
                const div = document.createElement("div");
                div.innerHTML = `${demoClasses[i]}: 0.0%`;
                labelContainer.appendChild(div);
            }
        }
        
        // Generate random predictions for demo
        function generateDemoPredictions() {
            const predictions = [];
            let total = 0;
            
            // Generate random values
            for (let i = 0; i < maxPredictions; i++) {
                const value = Math.random();
                predictions.push(value);
                total += value;
            }
            
            // Normalize to sum to 1
            for (let i = 0; i < maxPredictions; i++) {
                predictions[i] = predictions[i] / total;
            }
            
            return predictions.map((prob, index) => ({
                className: demoClasses[index],
                probability: prob
            }));
        }
        
        // Format confidence score to 2 decimal places with randomized decimal points
        // Never shows 100% - caps at 99.xx%
        function formatConfidenceScore(probability) {
            let confidence = probability * 100;
            
            // Never show 100% confidence - cap at 99.xx
            if (confidence >= 100) {
                confidence = 99 + Math.random() * 0.99; // 99.00 to 99.99
            }
            
            // Add randomized decimal places while maintaining the base confidence level
            const baseConfidence = Math.floor(confidence);
            const randomDecimal = Math.random() * 0.99; // 0.00 to 0.99
            
            return (baseConfidence + randomDecimal).toFixed(2);
        }

        // Update predictions display
        function updatePredictions() {
            const predictions = generateDemoPredictions();
            
            for (let i = 0; i < maxPredictions; i++) {
                const probability = predictions[i].probability;
                const className = predictions[i].className;
                const percentage = formatConfidenceScore(probability);
                
                const classPrediction = `${className}: ${percentage}%`;
                const labelDiv = labelContainer.childNodes[i];
                labelDiv.innerHTML = classPrediction;
                
                // Add styling based on confidence
                labelDiv.className = '';
                if (probability > 0.4) {
                    labelDiv.classList.add('prediction-high');
                } else if (probability > 0.2) {
                    labelDiv.classList.add('prediction-medium');
                } else {
                    labelDiv.classList.add('prediction-low');
                }
            }
        }
        
        // Initialize webcam (demo version)
        async function initWebcam() {
            try {
                showStatus('Setting up demo webcam...', 'loading');
                
                // Create a demo canvas
                const canvas = document.createElement('canvas');
                canvas.width = 224;
                canvas.height = 224;
                const ctx = canvas.getContext('2d');
                
                // Draw a simple pattern
                ctx.fillStyle = '#f0f0f0';
                ctx.fillRect(0, 0, 224, 224);
                ctx.fillStyle = '#4CAF50';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('DEMO MODE', 112, 100);
                ctx.fillText('üì∑', 112, 130);
                ctx.font = '14px Arial';
                ctx.fillText('Simulated Camera', 112, 150);
                
                // Add to DOM
                const webcamContainer = document.getElementById("webcam-container");
                webcamContainer.innerHTML = '';
                webcamContainer.appendChild(canvas);
                
                // Initialize demo
                initDemo();
                
                // Start demo prediction loop
                isWebcamRunning = true;
                demoPredictionLoop();
                
                // Update button states
                startBtn.disabled = true;
                stopBtn.disabled = false;
                
                showStatus('Demo webcam started! üì∏', 'success');
                setTimeout(hideStatus, 2000);
                
            } catch (error) {
                console.error('Error initializing demo webcam:', error);
                showStatus('Error: Could not start demo webcam.', 'error');
            }
        }
        
        // Demo prediction loop
        function demoPredictionLoop() {
            if (isWebcamRunning) {
                updatePredictions();
                setTimeout(() => {
                    requestAnimationFrame(demoPredictionLoop);
                }, 1000); // Update every second
            }
        }
        
        // Stop webcam
        function stopWebcam() {
            isWebcamRunning = false;
            
            // Clear webcam container
            const webcamContainer = document.getElementById("webcam-container");
            webcamContainer.innerHTML = '';
            
            // Update button states
            startBtn.disabled = false;
            stopBtn.disabled = true;
            
            showStatus('Demo webcam stopped', 'success');
            setTimeout(hideStatus, 2000);
        }
        
        // Handle image upload (demo)
        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                showStatus('Processing demo image...', 'loading');
                
                // Show preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = 'block';
                    
                    // Initialize demo if not already done
                    if (!labelContainer.children.length) {
                        initDemo();
                    }
                    
                    // Generate demo predictions
                    updatePredictions();
                    
                    hideStatus();
                };
                reader.readAsDataURL(file);
            }
        }
        
        // Initialize the demo application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Teachable Machine Demo loaded');
            showStatus('Demo ready! This simulates how the real app works.', 'success');
            setTimeout(hideStatus, 3000);
        });
    </script>
</body>
</html>